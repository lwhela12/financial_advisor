{"file":"/Users/lucaswhelan/financial_advisor/src/services/db.ts","mappings":";AAAA,cAAc;;;AAEd;;;;;;;;GAQG;AAEH,6CAA4C;AAE5C,MAAM,WAAW,GAAG,IAAA,2BAAa,EAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AAEnD,IAAI,YAAiB,CAAC,CAAC,yDAAyD;AAEhF,IAAI,CAAC;IACH,8EAA8E;IAC9E,6EAA6E;IAC7E,oCAAoC;IACpC,gGAAgG;IAChG,YAAY,GAAG,WAAW,CAAC,gBAAgB,CAAC,CAAC,YAAY,CAAC;AAC5D,CAAC;AAAC,MAAM,CAAC;IACP,4EAA4E;IAC5E,mDAAmD;IACnD,8DAA8D;IAC9D,YAAY,GAAG,MAAM,mBAAmB;QACtC;YACE,MAAM,IAAI,KAAK,CACb,oEAAoE,CACrE,CAAC;QACJ,CAAC;KACF,CAAC;AACJ,CAAC;AAED,2EAA2E;AAC3E,MAAM,eAAe,GAAG,UAAuE,CAAC;AAEnF,QAAA,MAAM,GAAG,eAAe,CAAC,MAAM,IAAI,IAAI,YAAY,EAAE,CAAC;AAEnE,IAAI,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,YAAY,EAAE,CAAC;IAC1C,eAAe,CAAC,MAAM,GAAG,cAAM,CAAC;AAClC,CAAC;AAED,kBAAe,cAAM,CAAC","names":[],"sources":["/Users/lucaswhelan/financial_advisor/src/services/db.ts"],"sourcesContent":["// @ts-nocheck\n\n/*\n * Provides a singleton Prisma client instance.\n *\n * In a fresh clone the generated client might not exist yet; attempting to\n * import `@prisma/client` would then throw.  To keep the application and the\n * Jest test‑suite bootable without requiring developers/CI to run\n * `prisma generate` up‑front, we attempt the import in a try/catch and fall\n * back to a lightweight proxy that only throws when first used.\n */\n\nimport { createRequire } from 'node:module';\n\nconst nodeRequire = createRequire(import.meta.url);\n\nlet PrismaClient: any; // eslint-disable-line @typescript-eslint/no-explicit-any\n\ntry {\n  // The generated client lives inside `@prisma/client` after `prisma generate`.\n  // Requiring it synchronously keeps the code simple and works in both ESM and\n  // CJS contexts via `createRequire`.\n  // eslint-disable-next-line import/no-extraneous-dependencies,@typescript-eslint/no-var-requires\n  PrismaClient = nodeRequire('@prisma/client').PrismaClient;\n} catch {\n  // Fall‑back dummy that makes it obvious something is missing if an endpoint\n  // actually touches the database during a test run.\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  PrismaClient = class MissingPrismaClient {\n    constructor() {\n      throw new Error(\n        'Prisma Client has not been generated. Run \"prisma generate\" first.',\n      );\n    }\n  };\n}\n\n// Re‑use the client across hot‑reloads to avoid exhausting DB connections.\nconst globalForPrisma = globalThis as unknown as { prisma?: InstanceType<typeof PrismaClient> };\n\nexport const prisma = globalForPrisma.prisma ?? new PrismaClient();\n\nif (process.env.NODE_ENV !== 'production') {\n  globalForPrisma.prisma = prisma;\n}\n\nexport default prisma;\n"],"version":3}