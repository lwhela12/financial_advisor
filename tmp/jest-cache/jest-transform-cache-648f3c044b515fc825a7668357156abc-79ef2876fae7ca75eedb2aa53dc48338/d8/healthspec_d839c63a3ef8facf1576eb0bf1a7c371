7632a9c24733fcb67291fa5be9dca519
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const server_1 = require("../src/server");
let server;
beforeAll(async () => {
    server = await (0, server_1.buildServer)();
});
afterAll(async () => {
    await server.close();
});
describe('system routes', () => {
    it('GET /healthz should return ok', async () => {
        const res = await server.inject({ method: 'GET', url: '/healthz' });
        expect(res.statusCode).toBe(200);
        expect(res.json()).toEqual({ status: 'ok' });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2x1Y2Fzd2hlbGFuL2ZpbmFuY2lhbF9hZHZpc29yL3Rlc3RzL2hlYWx0aC5zcGVjLnRzIiwibWFwcGluZ3MiOiI7O0FBQUEsMENBQTRDO0FBSTVDLElBQUksTUFBdUIsQ0FBQztBQUU1QixTQUFTLENBQUMsS0FBSyxJQUFJLEVBQUU7SUFDbkIsTUFBTSxHQUFHLE1BQU0sSUFBQSxvQkFBVyxHQUFFLENBQUM7QUFDL0IsQ0FBQyxDQUFDLENBQUM7QUFFSCxRQUFRLENBQUMsS0FBSyxJQUFJLEVBQUU7SUFDbEIsTUFBTSxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUM7QUFDdkIsQ0FBQyxDQUFDLENBQUM7QUFFSCxRQUFRLENBQUMsZUFBZSxFQUFFLEdBQUcsRUFBRTtJQUM3QixFQUFFLENBQUMsK0JBQStCLEVBQUUsS0FBSyxJQUFJLEVBQUU7UUFDN0MsTUFBTSxHQUFHLEdBQUcsTUFBTSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsVUFBVSxFQUFFLENBQUMsQ0FBQztRQUNwRSxNQUFNLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNqQyxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7SUFDL0MsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvbHVjYXN3aGVsYW4vZmluYW5jaWFsX2Fkdmlzb3IvdGVzdHMvaGVhbHRoLnNwZWMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYnVpbGRTZXJ2ZXIgfSBmcm9tICcuLi9zcmMvc2VydmVyJztcblxuaW1wb3J0IHR5cGUgeyBGYXN0aWZ5SW5zdGFuY2UgfSBmcm9tICdmYXN0aWZ5JztcblxubGV0IHNlcnZlcjogRmFzdGlmeUluc3RhbmNlO1xuXG5iZWZvcmVBbGwoYXN5bmMgKCkgPT4ge1xuICBzZXJ2ZXIgPSBhd2FpdCBidWlsZFNlcnZlcigpO1xufSk7XG5cbmFmdGVyQWxsKGFzeW5jICgpID0+IHtcbiAgYXdhaXQgc2VydmVyLmNsb3NlKCk7XG59KTtcblxuZGVzY3JpYmUoJ3N5c3RlbSByb3V0ZXMnLCAoKSA9PiB7XG4gIGl0KCdHRVQgL2hlYWx0aHogc2hvdWxkIHJldHVybiBvaycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBzZXJ2ZXIuaW5qZWN0KHsgbWV0aG9kOiAnR0VUJywgdXJsOiAnL2hlYWx0aHonIH0pO1xuICAgIGV4cGVjdChyZXMuc3RhdHVzQ29kZSkudG9CZSgyMDApO1xuICAgIGV4cGVjdChyZXMuanNvbigpKS50b0VxdWFsKHsgc3RhdHVzOiAnb2snIH0pO1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9