{"file":"/Users/lucaswhelan/financial_advisor/src/services/queue.ts","mappings":";;;AAAA,mCAA+B;AAE/B,IAAI,aAAa,GAAiB,IAAI,CAAC;AAEvC,IAAI,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,MAAM,EAAE,CAAC;IACpC,oEAAoE;IACpE,aAAa,GAAG;QACd,GAAG,EAAE,KAAK,IAAI,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,UAAU,EAAE,CAAC;QACrC,MAAM,EAAE,KAAK,IAAI,EAAE,CAAC,IAAI;KACL,CAAC;AACxB,CAAC;KAAM,CAAC;IACN,MAAM,UAAU,GAAQ;QACtB,GAAG,EAAE,OAAO,CAAC,GAAG,CAAC,SAAS,IAAI,wBAAwB;KACvD,CAAC;IAEF,aAAa,GAAG,IAAI,cAAK,CAAC,KAAK,EAAE;QAC/B,UAAU;QACV,iBAAiB,EAAE;YACjB,gBAAgB,EAAE;gBAChB,GAAG,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,EAAE,oBAAoB;aAC5C;YACD,YAAY,EAAE;gBACZ,GAAG,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;aACtB;SACF;KACF,CAAC,CAAC;AACL,CAAC;AAEY,QAAA,QAAQ,GAAG,aAAa,CAAC","names":[],"sources":["/Users/lucaswhelan/financial_advisor/src/services/queue.ts"],"sourcesContent":["import { Queue } from 'bullmq';\n\nlet queueInstance: Queue | null = null;\n\nif (process.env.NODE_ENV === 'test') {\n  // Provide a stub noâ€‘op queue during tests to avoid Redis dependency\n  queueInstance = {\n    add: async () => ({ id: 'test-job' }),\n    getJob: async () => null,\n  } as unknown as Queue;\n} else {\n  const connection: any = {\n    url: process.env.REDIS_URL || 'redis://localhost:6379',\n  };\n\n  queueInstance = new Queue('ocr', {\n    connection,\n    defaultJobOptions: {\n      removeOnComplete: {\n        age: 60 * 60 * 24 * 7, // 7 days in seconds\n      },\n      removeOnFail: {\n        age: 60 * 60 * 24 * 7,\n      },\n    },\n  });\n}\n\nexport const ocrQueue = queueInstance;\n"],"version":3}